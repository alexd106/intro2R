<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Exercises</title>

<script src="site_libs/header-attrs-2.20/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-162377463-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-162377463-2');
</script>


<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #204a87; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #204a87; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>







<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Intro2R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="setup.html">
    <span class="fa fa-cog"></span>
     
    Setup
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-book"></span>
     
    R Book
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://intro2r.com">
        <span class="fa fa-firefox"></span>
         
        Web book
      </a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="https://github.com/alexd106/Rbook/raw/master/docs/Rbook.pdf">
        <span class="fa fa-file-pdf"></span>
         
        PDF book
      </a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-university"></span>
     
    Learn R
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="howto.html">
        <span class="fa fa-tv"></span>
         
        How-to
      </a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="lectures.html">
        <span class="fa fa-chalkboard"></span>
         
        Lectures
      </a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-file-contract"></span>
     
    Exercises
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="exercises.html">
        <span class="fa fa-folder"></span>
         
        Excercises
      </a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="exercise_solutions.html">
        <span class="fa fa-folder"></span>
         
        Exercise solutions
      </a>
    </li>
  </ul>
</li>
<li>
  <a href="data.html">
    <span class="fa fa-download"></span>
     
    Data
  </a>
</li>
<li>
  <a href="Tutorials.html">
    <span class="fa fa-desktop"></span>
     
    Tutorials
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-question-circle"></span>
     
    Info
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="syllabus.html">
        <span class="fa fa-graduation-cap"></span>
         
        Syllabus
      </a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="People.html">
        <span class="fa fa-user-friends"></span>
         
        People
      </a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="resources.html">
        <span class="fa fa-book"></span>
         
        Resources
      </a>
    </li>
    <li>
      <a href="https://forms.gle/U7MbyhRWyLomjyFY7">
        <span class="fa fa-commenting"></span>
         
        Feedback
      </a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="People.html">
        <span class="fa fa-envelope fa-lg"></span>
         
        Contact
      </a>
    </li>
    <li>
      <a href="https://github.com/alexd106/intro2R">
        <span class="fa fa-github fa-lg"></span>
         
        Source code
      </a>
    </li>
    <li>
      <a href="https://twitter.com/Scedacity">
        <span class="fa fa-twitter fa-lg"></span>
         
        Twitter
      </a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Exercises</h1>

</div>


<p> </p>
<div id="exercise-3-importing-and-manipulating-dataframes"
class="section level2">
<h2>Exercise 3: Importing and manipulating dataframes</h2>
<p> </p>
<p>Read <a href="https://intro2r.com/data-r.html">Chapter 3</a> to help
you complete the questions in this exercise.</p>
<p> </p>
<p>1. As in previous exercises, either create a new R script or continue
with your previous R script in your RStudio Project. Again, make sure
you include any metadata you feel is appropriate (title, description of
task, date of creation etc) and don’t forget to comment out your
metadata with a <code>#</code> at the beginning of the line.</p>
<p> </p>
<p>2. If you haven’t already, download the data file
<em>‘whaledata.xlsx’</em> from the <strong><a
href="data.html"><i class="fa fa-download"></i> Data</a></strong> link
and save it to the <code>data</code> directory you created in Exercise
1.</p>
<p> </p>
<p>3. Open this file in Microsoft Excel (or even better use an open
source equivalent - <a
href="https://www.libreoffice.org/download/download/">LibreOffice</a> is
a good free alternative) and save it as a tab delimited file type (see
<a
href="https://intro2r.com/importing-data.html#saving-files-to-import">Section
3.3.1</a> of the Introduction to R book or watch this <a
href="https://alexd106.github.io/BI5009/howto.html#import-vid">video</a>
if you’re not sure how to do this). Name the file
<em>‘whaledata.txt’</em> and save it to the <code>data</code> directory.
If you’re a Windows user be careful with file extensions (things like
<em>.txt</em>). By default, Windows doesn’t show you the file extension
(maybe the boffins at Microsoft don’t think you need to know complicated
things like this?) so if you enter <em>‘whaledata.txt’</em> as a
filename you might end up with a filename
<em>’whaledata.txt.txt</em>’!</p>
<p> </p>
<p>4. Time for a quick description of the <em>‘whaledata.txt’</em>
dataset to get your bearings. These data were collected during two
research cruises in the North Atlantic in May and October 2003. During
these two months the research vessel visited multiple stations (areas)
and marine mammal observers recorded the number of whales (who doesn’t
love whales!) at each of these stations. The time the vessel spent at
each station was also recorded along with other site specific variables
such as the latitude and longitude, water depth and gradient of the
seabed. The researchers also recorded the ambient level of sub-surface
noise with a hydrophone and categorised this variable into ‘low’,
‘medium’ or ‘high’. The structure of these data is known as a
rectangular dataset (aka ‘tidy’ data by the cool kids) with no missing
cells. Each row is an individual observation and each column a separate
variable. The variable names are contained in the first row of the
dataset (aka a header).</p>
<p> </p>
<p>5. Now let’s import the <em>‘whaledata.txt’</em> file into R. To do
this you will use the workhorse function of data importing,
<code>read.table()</code>. This function is incredibly flexible and can
import many different file types (take a look at the help file)
including our tab delimited file. Don’t forget to include the
appropriate arguments when using the <code>read.table()</code> function
(remember that header?) and assign it a variable with an appropriate
name (such as <code>whale</code>). Take a look at <a
href="https://intro2r.com/importing-data.html#import_fnc">Section
3.2.2</a> of the Introduction to R book or watch this <a
href="https://alexd106.github.io/BI5009/howto.html#import-vid">video</a>
if you need any further information.</p>
<p> </p>
<p>6. Once you have imported your data file nothing much seems to happen
(don’t worry, this is normal). To examine the contents of the dataframe
one option would be to just type the variable name (<code>whale</code>)
into the console. This is probably not a good idea and doesn’t really
tell you anything about the dataframe other than there’s alot of data
(try it)! A slightly better option is to use the <code>head()</code>
function to display the first 5 rows of your dataframe. Again, this is
likely to just fill up your console. A better option would be to use the
<code>names()</code> function which will return a vector of variable
names from your dataset. However, all you get are the names of the
variables but no other information. A much, much better option is to use
the <code>str()</code> function to display the structure of the dataset
and a neat summary of your variables. Another advantage is that you can
copy this information from the console and paste it into your R script
(making sure it’s commented) for later reference. How many observations
does this dataset have? How many variables are in this dataset? What
type of variables are <code>month</code> and
<code>water.noise</code>?</p>
<p> </p>
<p>7. You can get another useful summary of your dataframe by using the
<code>summary()</code> function. This will provide you with some useful
summary statistics for each variable. Notice how the type of output
depends on whether the variable is a factor or a number. Another useful
feature of the <code>summary()</code> function is that it will also
count the number of missing values in each variable. Which variables
have missing values and how many?</p>
<p> </p>
<p>8. Summarising and manipulating dataframes is a key skill to acquire
when learning R. Although there are many ways to do this, we will
concentrate on using the square bracket <code>[ ]</code> notation which
you used previously with vectors. The key thing to remember when using
<code>[ ]</code> with dataframes is that dataframes have two dimensions
(think rows and columns) so you always need to specify which rows and
which columns you want inside the <code>[ ]</code> (see <a
href="https://intro2r.com/wrangling-data-frames.html#positional-indexes">Section
3.4.1</a> and this <a
href="https://alexd106.github.io/BI5009/howto.html#dataw-vid">video</a>
for some additional background information and a few examples). Let’s
practice.</p>
<ol style="list-style-type: lower-alpha">
<li><p>Extract all the elements of the first 10 rows and the first 4
columns of the <code>whale</code> dataframe and assign to a new variable
called <code>whale.sub</code>.</p></li>
<li><p>Next, extract all observations (remember - rows) from the
<code>whale</code> dataframe and the columns <code>month</code>,
<code>water.noise</code> and <code>number.whales</code> and assign to a
variable called <code>whale.num</code>.</p></li>
<li><p>Now, extract the first 50 rows and all columns form the original
dataframe and assign to a variable <code>whale.may</code> (there’s a
better way to do this with conditional statements - see below).</p></li>
<li><p>Finally, extract all rows except the first 10 rows and all
columns except the last column. Remember, for some of these questions
you can specify the columns you want either by position or by name.
Practice both ways. Do you have a preference? If so why?</p></li>
</ol>
<p> </p>
<p>9. In addition to extracting rows and columns from your dataframe by
position you can also use conditional statements to select particular
rows based on some logical criteria. This is very useful but takes a bit
of practice to get used to (see <a
href="https://intro2r.com/wrangling-data-frames.html#logical-indexes">Section
3.4.2</a> for an introduction). Extract rows from your dataframe (all
columns by default) based on the following criteria (note: you will need
to assign the results of these statements to appropriately named
variables, I’ll leave it up to you to use informative names!):</p>
<ul>
<li>at depths greater than 1200 m</li>
<li>gradient steeper than 200 degrees</li>
<li>water noise level of ‘low’</li>
<li>water.noise level of ‘high’ in the month of ‘May’</li>
<li>month of ‘October’, water noise level of ‘low’ and gradient greater
than the median value of gradient (132)</li>
<li>all observations from between latitudes 60.0 and 61.0 and longitudes
-6.0 and -4.0</li>
<li>all rows that do not have a water noise level of mediumm</li>
</ul>
<p> </p>
<p>10. A really neat feature of extracting rows based on conditional
statements is that you can include R functions within the statement
itself. To practice this, modify your answer to the gradient question in
Q9e to use the <code>median()</code> function rather than hard coding
the value 132.</p>
<p> </p>
<p>11. However, when using functions in conditional statements you need
to be careful. For example, write some code to extract all rows from the
dataframe <code>whale</code> with depths greater than 1500 m and with a
greater number of whales spotted than average (hint: use the
<code>mean()</code> function in your conditional statement). Can you see
a problem with the output? Discuss the cause of this problem with an
instructor and explore possible solutions.</p>
<p> </p>
<p>12. Although you have concentrated on using the square bracket
<code>[ ]</code> notation to extract rows and columns from your
dataframe, there are of course many other approaches. One such approach
is to use the <code>subset()</code> function (see <code>?subset</code>
or search the Introduction to R book for the term ‘subset’for more
details). Use the <code>subset()</code> function to extract all rows in
’May’ with a time at station less than 1000 minutes and a depth greater
than 1000 m. Also use <code>subset()</code> to extract data collected in
‘October’ from latitudes greater than 61 degrees but only include the
columns <code>month</code>, <code>latitude</code>,
<code>longitude</code> and <code>number.whales</code>.</p>
<p> </p>
<p>13. Another useful way to manipulated your dataframes is to sort the
rows based on the value of a variable (or combinations of variables).
Rather counter-intuitively you should use the <code>order()</code>
function to sort your dataframes, not the <code>sort()</code> function
(see <a
href="https://intro2r.com/wrangling-data-frames.html#ordering-data-frames">Section
3.4.3</a> of the Introduction to R book for an explanation). Ordering
dataframes uses the same logic you practised in Q14 in Exercise 2. Let’s
practice with a straight forward example. Use the <code>order()</code>
function to sort all rows in the <code>whale</code> dataframe in
ascending order of depth (shallowest to deepest). Store this sorted
dataframe in a variable called <code>whale.depth.sort</code>.</p>
<p> </p>
<p>14. Now for something a little more complicated. Sort all rows in the
<code>whale</code> dataframe by ascending order of depth within each
level of water noise. The trick here is to remember that you can order
by more than one variable when using the <code>order()</code> function
(see <a
href="https://intro2r.com/wrangling-data-frames.html#ordering-data-frames">Section
3.4.3</a> again). Don’t forget to assign your sorted dataframe to a new
variable with a sensible name. Repeat the previous ordering but this
time order by <strong>descending</strong> order of depth within each
level of water noise.</p>
<p> </p>
<p>15. Often, we would like to summarise variables by, for example,
calculating a mean, median or counting the number of observations. To do
this for a single variable it’s fairly straight forward :</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">mean</span>(whale<span class="sc">$</span>time.at.station)     <span class="co"># mean time at station</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">median</span>(whale<span class="sc">$</span>depth)             <span class="co"># median depth</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">length</span>(whale<span class="sc">$</span>number.whales)     <span class="co"># number of observations</span></span></code></pre></div>
<p>15. (cont) Perhaps more interestingly, you might want summarise one
variable conditional on the level of another factor variable. For
example, write some R code to calculate the mean number of whales
sighted at each of the three levels of water noise (see <a
href="https://intro2r.com/summarising-data-frames.html#summarising-data-frames">Section
3.5</a> for a few hints). Next, calculate the median number of whales
sighted at each level of water noise and for each month.</p>
<p> </p>
<p>16. Another useful function for summarising dataframes is
<code>aggregate()</code>. Search in the R book for the function
aggregate to see how to use this function (or see
<code>?aggregate</code>). Use the <code>aggregate()</code> function to
calculate the mean of time at station, number of whales, depth and
gradient for each level of water noise (don’t forget about that sneaky
NA value). Next calculate the mean of time at station, number of whales,
depth and gradient for each level of water noise for each month.
(Optional): For an extra bonus point see if you can figure out how to
modify your previous code to display the mean values to 2 decimal places
rather than the default of 3 decimal places.</p>
<p> </p>
<p>17. Knowing how many observations are present for each factor level
(or combinations of factor levels) is useful to determine whether you
have an adequate sample size (for subsequent modelling for example). Use
the <code>table()</code> function to determine the number of
observations for each level of water noise (see <a
href="https://intro2r.com/summarising-data-frames.html#summarising-data-frames">Section
3.5</a> for a few tips). Next use the same function to display the
number of observations for each combination of water noise and month.
(Optional): The <code>xtabs()</code> function is very flexible for
creating tables of counts for factor combinations (aka contingency
tables). Take a look at the help file (or Google) to figure out how to
use the <code>xtabs()</code> function to replicate your use of the
<code>table()</code> function.</p>
<p> </p>
<p>18. Ok, we have spent quite a bit of time (and energy) learning how
to import and manipulate dataframes. The last thing we need to cover is
how to export dataframes from R to an external file (see <a
href="https://intro2r.com/exporting-data.html#exporting-data">Section
3.6</a> of the book for more details). Let’s say you want to export the
dataframe <code>whale.num</code> you created previously (see Q8) to a
file called ‘whale_num.txt’ in your <code>output</code> directory which
you created in Exercise 1. To do this you will need to use the
<code>write.table()</code> function. You want to include the the
variable names in the first row of the file, but you don’t want to
include the row names. Also, make sure the file is a tab delimited file.
Once you have create your file, try to open it in Microsoft Excel (or
open source equivalent).</p>
<p> </p>
<p>End of Exercise 3</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
